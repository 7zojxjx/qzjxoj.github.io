<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>定海七中教学OJ</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        .browser-warning {
            background-color: #ffcc00;
            padding: 10px;
            text-align: center;
            font-size: 14px;
        }
        .browser-warning a {
            color: #0066cc;
            text-decoration: none;
            font-weight: bold;
            margin: 0 10px;
        }
        header {
            background-color: #1e88e5;
            color: white;
            padding: 15px 20px;
            text-align: left;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header-title {
            margin: 0;
            font-size: 24px;
        }
        nav {
            background-color: #1565c0;
            padding: 10px 0;
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
        }
        nav ul li {
            margin: 0 15px;
        }
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: bold;
        }
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            display: flex;
            gap: 20px;
        }
        .main-content {
            flex: 3;
        }
        .sidebar {
            flex: 1;
        }
        .user-profile {
            background-color: white;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #ddd;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: #666;
        }
        .user-info {
            text-align: center;
        }
        .user-info h3 {
            margin: 0 0 5px;
        }
        .user-info p {
            margin: 0 0 10px;
            color: #666;
        }
        .welcome-section {
            background-color: white;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .training-section {
            background-color: white;
            border-radius: 5px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .training-item {
            border-bottom: 1px solid #eee;
            padding: 15px 0;
            display: flex;
            align-items: center;
        }
        .training-item:last-child {
            border-bottom: none;
        }
        .training-number {
            font-size: 24px;
            font-weight: bold;
            color: #1e88e5;
            min-width: 60px;
        }
        .training-content {
            flex-grow: 1;
        }
        .training-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .training-stats {
            color: #666;
            font-size: 14px;
        }
        .btn {
            display: inline-block;
            padding: 5px 15px;
            background-color: #1e88e5;
            color: white;
            border-radius: 3px;
            text-decoration: none;
            margin-top: 10px;
            cursor: pointer;
            border: none;
        }
        .btn:hover {
            background-color: #1565c0;
        }
        .btn-secondary {
            background-color: #666;
        }
        .btn-secondary:hover {
            background-color: #555;
        }
        .problem-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .problem-table th, .problem-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
            text-align: left;
        }
        .problem-table th {
            background-color: #f5f5f5;
            font-weight: bold;
        }
        .problem-table tr:hover {
            background-color: #f9f9f9;
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 15px 0;
            margin-top: 30px;
            font-size: 12px;
        }
        .code-snippet {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 3px;
            font-family: monospace;
            margin: 10px 0;
        }
        .language-selector {
            float: right;
            margin-right: 20px;
        }
        .user-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .user-controls a {
            color: white;
            text-decoration: none;
        }
        .login-container {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .login-container h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 3px;
            box-sizing: border-box;
        }
        .form-actions {
            margin-top: 20px;
            text-align: center;
        }
        .form-footer {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
            color: #666;
        }
        .edit-mode {
            outline: 2px dashed #1e88e5;
            padding: 2px;
            min-height: 20px;
        }
        .edit-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            display: flex;
            gap: 10px;
        }
        .hidden {
            display: none;
        }
        .batch-register-container {
            background-color: white;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .batch-register-textarea {
            width: 100%;
            height: 150px;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        .batch-register-instructions {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }
        .admin-badge {
            display: inline-block;
            padding: 2px 8px;
            background-color: #ff5722;
            color: white;
            border-radius: 10px;
            font-size: 12px;
            margin-left: 5px;
        }
        .super-admin-badge {
            background-color: #9c27b0;
        }
    </style>
</head>
<body>
    <!-- 登录模态框 -->
    <div id="loginModal" class="login-container hidden">
        <h2>登录</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">用户名</label>
                <input type="text" id="username" required>
            </div>
            <div class="form-group">
                <label for="password">密码</label>
                <input type="password" id="password" required>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="remember"> 下次自动登录
                </label>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn">登录</button>
            </div>
            <div class="form-footer">
                <a href="#" id="forgotPassword">忘记密码或者用户名？</a>
            </div>
        </form>
        <div class="form-footer">
            <a href="#" id="showRegister"></a>
        </div>
    </div>

    <!-- 注册模态框 -->
    <div id="registerModal" class="login-container hidden">
        <h2>注册</h2>
        <form id="registerForm">
            <div class="form-group">
                <label for="regUsername">用户名</label>
                <input type="text" id="regUsername" required>
            </div>
            <div class="form-group">
                <label for="regPassword">密码</label>
                <input type="password" id="regPassword" required>
            </div>
            <div class="form-group">
                <label for="regConfirmPassword">确认密码</label>
                <input type="password" id="regConfirmPassword" required>
            </div>
            <div class="form-group">
                <label for="regEmail">电子邮箱</label>
                <input type="email" id="regEmail" required>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn">注册</button>
 <p>注册一个DHQZCS账号，您就可以使用我们的完整服务</p>            
</div>
        </form>
        <div class="form-footer">
            已有账号？<a href="#" id="showLogin">立即登录</a>
        </div>
    </div>

    <!-- 主页面内容 -->
    <div id="mainContent">
        <div class="browser-warning">
           欢迎访问 定海七中教学OJ ，本网页有 徐嘉轩@xuage编写，管理员王老师@wsj，庄老师@zlls，服务器维护@720240117 ，我们推荐您使用电脑进行访问，以获得最佳体验。
            <a href="#">我已知晓</a>
            <a href="#">关闭窗口</a>
        </div>

        <header>
            <h1 class="header-title">定海七中教学OJ</h1>
            <div class="user-controls">
                <a href="#" id="loginLink">登录</a>
                <a href="#" id="registerLink"></a>
                <a href="#" id="editModeLink" class="hidden">编辑模式</a>
                <a href="#" id="logoutLink" class="hidden">登出</a>
                <div class="language-selector">
                    <a href="#">简体中文</a> 
                </div>
            </div>
        </header>

        <nav>
            <ul>
                <li><a href="#">首页</a></li>
                <li><a href="#">题库</a></li>
                <li><a href="#">训练</a></li>
                <li><a href="#">比赛</a></li>
                <li><a href="#">评测记录</a></li>
                <li><a href="#">排名</a></li>
            </ul>
        </nav>

        <div class="container">
            <div class="main-content">
                <!-- 批量注册模块 (管理员和超级管理员可见) -->
                <div id="batchRegisterContainer" class="batch-register-container hidden">
                    <h3>批量注册用户</h3>
                    <div class="batch-register-instructions">
                        每行输入一个用户信息，格式为：用户名,密码,邮箱,角色(可选)<br>
                        角色可以是：admin(管理员) 或 user(普通用户)<br>
                        超级管理员可以创建所有类型用户，管理员只能创建普通用户和管理员<br>
                        示例：<br>
                        student1,123456,student1@example.com,user<br>
                        teacher1,654321,teacher1@example.com,admin
                    </div>
                    <textarea id="batchRegisterText" class="batch-register-textarea" placeholder="输入要注册的用户信息，每行一个"></textarea>
                    <button id="executeBatchRegister" class="btn">执行批量注册</button>
                    <div id="batchRegisterResult"></div>
                </div>

                <section class="welcome-section">
                    <h2>欢迎来到定海七中教学OJ</h2>
                    <p>定海七中OJ欢迎你，本站正在完善，管理员还在努力搬砖中</p>
	    <p>本站隶属于个人编写，不属于任何组织性质</p>
<p>针对近期出现的假冒官方网站行为，我们将严厉查处，必要时将使用法律武器</p>
<p>请用户在合法范围内，合理使用我们的服务，我们将不定期抽查使用情况</p>
<p>一经发现此类违反规定事宜，我们将进行封号处理，并将处罚记录上传至服务器，被处罚者终身无法使用我们的服务</p>
<p>Welcome to 定海七中教学OJ!</p>
<p>定海七中教学OJ Powered by Hydro Community, Modified by 徐嘉轩</p>

<p>image</p>
<p>本站默认程序语言:Python3</p>

<p>访客无法使用/查看本站所有内容</p>

<p>请合理使用我们的服务。对于滥用行为，我们有权在不另行通知的情况下封禁相关账号及其上传/生成的相关数据。</p>
 
<p>为防止滥用注册服务 本站关闭对外注册服务功能 只有管理员能进行注册</p>

<p>本系统中远端评测题采用了Hydro对外提供的《一本通编程启蒙》与洛谷《深基》题目的评测接口 若有比赛进行接口会开启高防 导致无法进行评测</p>

<p>恭喜我校</p>
<p>杨译博@  yyb 赖致远@  海阔天空 (cqylcy) 余默浔@  ymx 沈夏世轩@  LaoShui 同学</p>

<p>荣获2022年舟山市第22届中小学生科技节信息科技素养能力比赛区级预赛一等奖</p>

<p>杨译博@  yyb 同学 荣获2022年舟山市科技艺术节初中Python组一等奖</p>

<p>赖致远@  海阔天空 (cqylcy) 同学 荣获2022年舟山市科技艺术节初中Python组二等奖</p>

<p>杨译博@  yyb 沈夏世轩@  LaoShui 陈姿霖@  czl 赖致远@  海阔天空 (cqylcy) 余默浔@  ymx 朱智宸@  b07230220 傅馨娴@  f(x) (user6) 同学</p>

<p>荣获2023年舟山市第23届中小学生科技节信息科技素养能力比赛区级预赛一等奖</p>

<p>杨译博@  yyb 同学 荣获2023年舟山市初中生信息科技编程赛Python组二等奖</p>

<p>沈夏世轩@  LaoShui 陈姿霖@  czl 赖致远@  海阔天空 (cqylcy) 朱智宸@  b07230220 同学</p>

<p>荣获2023年舟山市初中生信息科技编程赛Python组三等奖</p>

<p>Info:</p>
<p>最后备份时间：2025年5月1日15:24</p>
<p>在该时间以后的数据可能会丢失</p>
                    <div class="code-snippet">
                        公告
                        尊敬的学生和老师：
                        为了不断优化使用体验和题库总量，我们将于5月1日至5月3日进行全面更新，届时将关闭服务器，请您谅解！
                        更新前版本：v 0.13
                        更新后版本：v 1.03
                        更新内容：增加题库数量及训练题目数量，页面重新布局           
                    </div>
                    <a href="#" class="btn">Copy</a>
                </section>

                <section class="training-section">
                    <h2>训练</h2>
                    
                    <div class="training-item">
                        <div class="training-number">1.</div>
                        <div class="training-content">
                            <div class="training-title">入门【已开放】</div>
                            <div class="training-stats">C++入门 整数输出、小数输出、变量输入、拆位运算</div>
                            <div class="training-stats">未参加 4 小节, 41 道题</div>
                        </div>
                        <div class="training-number">571</div>
                    </div>
                    
                    <div class="training-item">
                        <div class="training-number">2.</div>
                        <div class="training-content">
                            <div class="training-title">分支【未开放】</div>
                            <div class="training-stats">C++分支：双分支、多分支</div>
                            <div class="training-stats">未参加 3 小节, 55 道题</div>
                        </div>
                        <div class="training-number">79</div>
                    </div>
                    
                    <div class="training-item">
                        <div class="training-number">3.</div>
                        <div class="training-content">
                            <div class="training-title">循环【未开放】</div>
                            <div class="training-stats">C++循环: 基础-循环输出、求和计数、嵌套循环-图形输出、嵌套循环-应用、while循环、短除法、循环综合应用</div>
                            <div class="training-stats">未参加 7 小节, 113 道题</div>
                        </div>
                        <div class="training-number">73</div>
                    </div>
                    
                    <div class="training-item">
                        <div class="training-number">4.</div>
                        <div class="training-content">
                            <div class="training-title">穷举【未开放】</div>
                            <div class="training-stats">穷举:简单穷举、嵌套穷举</div>
                            <div class="training-stats">未参加 2 小节, 17 道题</div>
                        </div>
                        <div class="training-number">32</div>
                    </div>
                  
	  <div class="training-item">
                        <div class="training-number">5.</div>
                        <div class="training-content">
                            <div class="training-title">大课间练习【正在维护】</div>
                            <div class="training-stats">Python循环: 基础-循环输出、求和计数、嵌套循环-图形输出、嵌套循环-应用、while循环、短除法、循环综合应用</div>
                            <div class="training-stats">未参加 7 小节, 113 道题</div>
                        </div>
                        <div class="training-number">73</div>
                    </div>
                </section>

	<section class="training-section">
                    <h2>比赛</h2>
                    
                    <div class="training-item">
                        <div class="training-number">1.</div>
                        <div class="training-content">
                            <div class="training-title">大课间擂台赛</div>
                            <div class="training-stats">小数输出、变量输入、循环嵌套</div>
                            <div class="training-stats">未参加</div>
                        </div>
                        <div class="training-number">09</div>
                    </div>
                    
                    <div class="training-item">
                        <div class="training-number">2.</div>
                        <div class="training-content">
                            <div class="training-title">编程社团</div>
                            <div class="training-stats">循环，进制转换</div>
                            <div class="training-stats">未参加</div>
                        </div>
                        <div class="training-number">13</div>
                    </div>
                        </tbody>
                    </table>
                </section>
            </div>

            <div class="sidebar">
                <div id="userProfile" class="user-profile hidden">
                    <div class="user-avatar" id="userAvatar">?</div>
                    <div class="user-info">
                        <h3 id="displayUsername">用户名</h3>
                        <p id="displayEmail">email@dhqzcs.com</p>
                        <p id="userRole">普通用户</p>
                        <button id="editProfile" class="btn btn-secondary">编辑资料</button>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div>关于 | 联系我们 | 隐私 | 服务条款 | 版权申诉</div>
            <div>兼容模式</div>
            <div>定海七中教学OJ by 徐嘉轩</div>
            <div>题目来源：中学生C++ Python题库资源网</div>
        </footer>
    </div>

    <!-- 编辑控制面板 -->
    <div id="editControls" class="edit-controls hidden">
        <button id="saveChanges" class="btn">保存更改</button>
        <button id="exitEditMode" class="btn btn-secondary">退出编辑模式</button>
    </div>

    <!-- 用户资料编辑模态框 -->
    <div id="profileModal" class="login-container hidden">
        <h2>编辑资料</h2>
        <form id="profileForm">
            <div class="form-group">
                <label for="profileUsername">用户名</label>
                <input type="text" id="profileUsername" readonly>
            </div>
            <div class="form-group">
                <label for="profileEmail">电子邮箱</label>
                <input type="email" id="profileEmail" required>
            </div>
            <div class="form-group">
                <label for="profilePassword">新密码（留空则不修改）</label>
                <input type="password" id="profilePassword">
            </div>
            <div class="form-group">
                <label for="profileConfirmPassword">确认新密码</label>
                <input type="password" id="profileConfirmPassword">
            </div>
            <div class="form-actions">
                <button type="submit" class="btn">保存更改</button>
                <button type="button" id="cancelEditProfile" class="btn btn-secondary">取消</button>
            </div>
        </form>
    </div>

    <script>
// ===== 题库弹窗实现 =====
const problemBankLink = document.querySelector('nav ul li:nth-child(2) a');

// 创建全屏弹窗
const problemBankModal = document.createElement('div');
problemBankModal.id = 'problemBankModal';
problemBankModal.className = 'hidden';
problemBankModal.style.cssText = `
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: white;
    z-index: 1000;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
`;

// 弹窗头部
const modalHeader = document.createElement('div');
modalHeader.style.cssText = `
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
`;

const modalTitle = document.createElement('h2');
modalTitle.textContent = '题库';
modalTitle.style.margin = '0';

const closeButton = document.createElement('button');
closeButton.innerHTML = '&times; 关闭';
closeButton.className = 'btn';
closeButton.style.cssText = `
    background: none;
    border: none;
    color: #1e88e5;
    font-size: 18px;
    cursor: pointer;
    padding: 5px 10px;
`;

// 题目列表容器
const problemList = document.createElement('div');
problemList.style.cssText = `
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 15px;
`;

// 题目数据
const problems = [
    {
        id: 'P1001',
        title: '【入门】按序输出1-100',
        difficulty: '简单',
        description: '将数字从1-100按序输出，空格分隔',
        input: '无',
        output: '1 2 3 ... 100',
        sampleCode: `#include <iostream>
using namespace std;

int main() {
    for(int i=1; i<=100; i++) {
        cout << i << " ";
    }
    return 0;
}`
    },
    {
        id: 'P1002',
        title: '【入门】求和1+2+...+n',
        difficulty: '简单',
        description: '计算从1加到n的和',
        input: '整数n (1 ≤ n ≤ 1000)',
        output: '和值',
        sampleCode: `#include <iostream>
using namespace std;

int main() {
    int n, sum=0;
    cin >> n;
    for(int i=1; i<=n; i++) sum += i;
    cout << sum;
    return 0;
}`
    },
    {
        id: 'P1003',
        title: '【入门】判断奇偶数',
        difficulty: '简单',
        description: '判断输入数字的奇偶性',
        input: '整数n',
        output: '偶数输出"even"，奇数输出"odd"',
        sampleCode: `#include <iostream>
using namespace std;

int main() {
    int n;
    cin >> n;
    cout << (n%2 == 0 ? "even" : "odd");
    return 0;
}`
    },
    {
        id: 'P1004',
        title: '【入门】找最大值',
        difficulty: '简单',
        description: '输入n个数字，找出最大值',
        input: '第一行n，第二行n个整数',
        output: '最大值',
        sampleCode: `#include <iostream>
#include <climits>
using namespace std;

int main() {
    int n, num, max=INT_MIN;
    cin >> n;
    while(n--) {
        cin >> num;
        if(num > max) max = num;
    }
    cout << max;
    return 0;
}`
    },
    {
        id: 'P1005',
        title: '【基础】计算平均数',
        difficulty: '简单',
        description: '计算n个数的平均值（保留2位小数）',
        input: '第一行n，第二行n个整数',
        output: '平均值',
        sampleCode: `#include <iostream>
#include <iomanip>
using namespace std;

int main() {
    int n, num, sum=0;
    cin >> n;
    for(int i=0; i<n; i++) {
        cin >> num;
        sum += num;
    }
    cout << fixed << setprecision(2) << (double)sum/n;
    return 0;
}`
    },
    {
        id: 'P1006',
        title: '【基础】判断闰年',
        difficulty: '简单',
        description: '判断年份是否为闰年',
        input: '年份y (1000 ≤ y ≤ 9999)',
        output: '闰年输出"YES"，否则"NO"',
        sampleCode: `#include <iostream>
using namespace std;

bool isLeap(int y) {
    return (y%400==0) || (y%100!=0 && y%4==0);
}

int main() {
    int year;
    cin >> year;
    cout << (isLeap(year) ? "YES" : "NO");
    return 0;
}`
    },
    {
        id: 'P1007',
        title: '【基础】数字反转',
        difficulty: '中等',
        description: '将整数反转输出（保留符号）',
        input: '整数n (-1e5 ≤ n ≤ 1e5)',
        output: '反转后的数字',
        sampleCode: `#include <iostream>
using namespace std;

int reverse(int n) {
    int res = 0;
    while(n) {
        res = res*10 + n%10;
        n /= 10;
    }
    return res;
}

int main() {
    int n;
    cin >> n;
    cout << (n >= 0 ? reverse(n) : -reverse(-n));
    return 0;
}`
    },
    {
        id: 'P1008',
        title: '【基础】素数判断',
        difficulty: '中等',
        description: '判断给定数是否为素数',
        input: '正整数n (1 ≤ n ≤ 1e6)',
        output: '素数输出"YES"，否则"NO"',
        sampleCode: `#include <iostream>
#include <cmath>
using namespace std;

bool isPrime(int n) {
    if(n < 2) return false;
    for(int i=2; i<=sqrt(n); i++)
        if(n%i == 0) return false;
    return true;
}

int main() {
    int n;
    cin >> n;
    cout << (isPrime(n) ? "YES" : "NO");
    return 0;
}`
    },
    {
        id: 'P1009',
        title: '【基础】斐波那契数列',
        difficulty: '中等',
        description: '输出前n项斐波那契数列',
        input: '整数n (1 ≤ n ≤ 20)',
        output: '数列项，空格分隔',
        sampleCode: `#include <iostream>
using namespace std;

int main() {
    int n, a=1, b=1, c;
    cin >> n;
    if(n >= 1) cout << "1";
    if(n >= 2) cout << " 1";
    for(int i=3; i<=n; i++) {
        c = a + b;
        cout << " " << c;
        a = b;
        b = c;
    }
    return 0;
}`
    },
    {
        id: 'P1010',
        title: '【基础】最大公约数',
        difficulty: '中等',
        description: '求两个数的最大公约数',
        input: '两个正整数a,b (≤1e6)',
        output: 'GCD(a,b)',
        sampleCode: `#include <iostream>
using namespace std;

int gcd(int a, int b) {
    return b == 0 ? a : gcd(b, a%b);
}

int main() {
    int a, b;
    cin >> a >> b;
    cout << gcd(a, b);
    return 0;
}`
    },
    {
        id: 'P1011',
        title: '【基础】最小公倍数',
        difficulty: '中等',
        description: '求两个数的最小公倍数',
        input: '两个正整数a,b (≤1e6)',
        output: 'LCM(a,b)',
        sampleCode: `#include <iostream>
using namespace std;

int gcd(int a, int b) {
    return b == 0 ? a : gcd(b, a%b);
}

int main() {
    int a, b;
    cin >> a >> b;
    cout << a / gcd(a, b) * b;
    return 0;
}`
    },
    {
        id: 'P1012',
        title: '【基础】阶乘计算',
        difficulty: '中等',
        description: '计算n的阶乘',
        input: '整数n (1 ≤ n ≤ 12)',
        output: 'n!的值',
        sampleCode: `#include <iostream>
using namespace std;

int main() {
    int n, res=1;
    cin >> n;
    for(int i=2; i<=n; i++) res *= i;
    cout << res;
    return 0;
}`
    },
    {
        id: 'P1013',
        title: '【基础】冒泡排序',
        difficulty: '中等',
        description: '对n个数进行升序排序',
        input: '第一行n，第二行n个整数',
        output: '排序后的数列',
        sampleCode: `#include <iostream>
using namespace std;

void bubbleSort(int arr[], int n) {
    for(int i=0; i<n-1; i++)
        for(int j=0; j<n-i-1; j++)
            if(arr[j] > arr[j+1])
                swap(arr[j], arr[j+1]);
}

int main() {
    int n, arr[100];
    cin >> n;
    for(int i=0; i<n; i++) cin >> arr[i];
    bubbleSort(arr, n);
    for(int i=0; i<n; i++) cout << arr[i] << " ";
    return 0;
}`
    },
    {
        id: 'P1014',
        title: '【基础】选择排序',
        difficulty: '中等',
        description: '对n个数进行升序排序',
        input: '第一行n，第二行n个整数',
        output: '排序后的数列',
        sampleCode: `#include <iostream>
using namespace std;

void selectionSort(int arr[], int n) {
    for(int i=0; i<n-1; i++) {
        int minIdx = i;
        for(int j=i+1; j<n; j++)
            if(arr[j] < arr[minIdx])
                minIdx = j;
        swap(arr[i], arr[minIdx]);
    }
}

int main() {
    int n, arr[100];
    cin >> n;
    for(int i=0; i<n; i++) cin >> arr[i];
    selectionSort(arr, n);
    for(int i=0; i<n; i++) cout << arr[i] << " ";
    return 0;
}`
    },
    {
        id: 'P1015',
        title: '【基础】二分查找',
        difficulty: '中等',
        description: '在有序数组中查找目标值',
        input: '第一行n和target，第二行n个升序整数',
        output: 'target的位置索引（从0开始），未找到输出-1',
        sampleCode: `#include <iostream>
using namespace std;

int binarySearch(int arr[], int n, int target) {
    int left = 0, right = n-1;
    while(left <= right) {
        int mid = left + (right-left)/2;
        if(arr[mid] == target) return mid;
        if(arr[mid] < target) left = mid+1;
        else right = mid-1;
    }
    return -1;
}

int main() {
    int n, target, arr[100];
    cin >> n >> target;
    for(int i=0; i<n; i++) cin >> arr[i];
    cout << binarySearch(arr, n, target);
    return 0;
}`
    },
    {
        id: 'P1016',
        title: '【基础】字符串反转',
        difficulty: '中等',
        description: '将输入字符串反转输出',
        input: '一个字符串（长度≤100）',
        output: '反转后的字符串',
        sampleCode: `#include <iostream>
#include <algorithm>
#include <string>
using namespace std;

int main() {
    string s;
    getline(cin, s);
    reverse(s.begin(), s.end());
    cout << s;
    return 0;
}`
    },
    {
        id: 'P1017',
        title: '【基础】统计字符',
        difficulty: '中等',
        description: '统计字符串中各字母出现次数（不区分大小写）',
        input: '一个字符串（长度≤1000）',
        output: '每个字母及其出现次数（按字母序）',
        sampleCode: `#include <iostream>
#include <cctype>
using namespace std;

int main() {
    string s;
    int count[26] = {0};
    getline(cin, s);
    for(char c : s) {
        if(isalpha(c)) {
            count[tolower(c)-'a']++;
        }
    }
    for(int i=0; i<26; i++) {
        if(count[i] > 0) {
            cout << char('a'+i) << ": " << count[i] << endl;
        }
    }
    return 0;
}`
    },
    {
        id: 'P1018',
        title: '【基础】矩阵转置',
        difficulty: '中等',
        description: '将n×n矩阵转置后输出',
        input: '第一行n，接着n行n列的矩阵',
        output: '转置后的矩阵',
        sampleCode: `#include <iostream>
using namespace std;

int main() {
    int n, matrix[10][10];
    cin >> n;
    for(int i=0; i<n; i++)
        for(int j=0; j<n; j++)
            cin >> matrix[i][j];
    
    for(int j=0; j<n; j++) {
        for(int i=0; i<n; i++) {
            cout << matrix[i][j] << " ";
        }
        cout << endl;
    }
    return 0;
}`
    },
    {
        id: 'P1019',
        title: '【基础】回文数判断',
        difficulty: '中等',
        description: '判断整数是否为回文数',
        input: '整数n (≥0)',
        output: '是回文数输出"YES"，否则"NO"',
        sampleCode: `#include <iostream>
using namespace std;

bool isPalindrome(int n) {
    if(n < 0) return false;
    int original = n, reversed = 0;
    while(n) {
        reversed = reversed*10 + n%10;
        n /= 10;
    }
    return original == reversed;
}

int main() {
    int n;
    cin >> n;
    cout << (isPalindrome(n) ? "YES" : "NO");
    return 0;
}`
    },
    {
        id: 'P1020',
        title: '【基础】小数位数判断',
        difficulty: '中等',
        description: '判断小数有几位数',
        input: '小数n ',
        output: '输出该小数位数',
        sampleCode: `#include <iostream>
#include <string>
#include <algorithm>

using namespace std;

int countDecimalPlaces(double number) {
    // 将数字转换为字符串
    string numStr = to_string(number);
    
    // 查找小数点位置
    size_t decimalPos = numStr.find('.');
    
    // 如果没有小数点，返回0
    if (decimalPos == string::npos) {
        return 0;
    }
    
    // 计算小数点后的位数
    // 需要去除末尾可能的无效0（to_string转换可能添加的）
    size_t lastNonZero = numStr.find_last_not_of('0');
    
    // 如果小数点后全是0，返回0
    if (lastNonZero == decimalPos) {
        return 0;
    }
    
    // 返回有效小数位数
    return lastNonZero - decimalPos;
}

int main() {
    double number;
    
    cout << "请输入一个小数: ";
    cin >> number;
    
    int decimalPlaces = countDecimalPlaces(number);
    
    cout << "这个小数有 " << decimalPlaces << " 位小数" << endl;
    
    return 0;
}`
    },

    {
        id: 'P1021',
        title: '【基础】金银岛',
        difficulty: '中等',
        description: '金银岛上有s重金属，每种金属重量不同，分别为n,n,…,n，同时每种金属的价值也不同，分别为v,v,…,v，一次带走金属的重量总和不能超过w，最多能带走价值多少的金属',
        input: '第一行是测试数据的组数k，后面跟着k组输入，每组测试数据占三行，第一行是w，第二行是一个正整数s，第三行有2s格式指数，分别为n,v,……n,v，Ds4种金属的总重量和总价值',
        output: 'K行，每行输出对应一个输入，输出精确到小数点后二位',
        sampleCode: `#include <iostream>
#include <vector>
#include <algorithm>
#include <iomanip>

using namespace std;

double solve() {
    int w, s;
    cin >> w >> s;
    
    vector<int> weights(s), values(s);
    for (int i = 0; i < s; ++i) {
        cin >> weights[i] >> values[i];
    }
    
    vector<double> dp(w + 1, 0.0);
    
    for (int i = 0; i < s; ++i) {
        for (int j = w; j >= weights[i]; --j) {
            if (dp[j - weights[i]] + values[i] > dp[j]) {
                dp[j] = dp[j - weights[i]] + values[i];
            }
        }
    }
    
    return dp[w];
}

int main() {
    int k;
    cin >> k;
    
    cout << fixed << setprecision(2);
    
    while (k--) {
        double max_value = solve();
        cout << max_value << endl;
    }
    
    return 0;
}`
    },
    {
        id: 'P1022',
        title: '【基础】货币系统',
        difficulty: '中等',
        description: '给你一个n种面值的货币系统，求组成面值为m的货币有几种方案',
        input: '第一行输入n，第二行输入面值m',
        output: '方案个数',
        sampleCode: `#include <iostream>
#include <vector>

using namespace std;

int countWays(vector<int>& coins, int m) {
    vector<int> dp(m + 1, 0);
    dp[0] = 1;  // 初始条件：组成面值0有1种方案
    
    for (int coin : coins) {
        for (int j = coin; j <= m; ++j) {
            dp[j] += dp[j - coin];
        }
    }
    
    return dp[m];
}

int main() {
    int n, m;
    cin >> n >> m;
    
    vector<int> coins(n);
    for (int i = 0; i < n; ++i) {
        cin >> coins[i];
    }
    
    cout << countWays(coins, m) << endl;
    
    return 0;
}`
    },
    {
        id: 'P1023',
        title: '【基础】区间调度问题',
        difficulty: '中等',
        description: '学校在最近几天有n个活动，这些活动都需要使用学校的大礼堂，在同一时间礼堂只能被一个活动使用，由于有些活动时间上有冲突，学校办公室人员只好让一些活动放弃使用礼堂，而使用其他教室，现在给出n个活动使用礼堂的起始时间begin,和结束时间end,请你帮助办公室人员安排一些活动来使用礼堂要求安排的活动尽量多',
        input: '第一行一个整数n,接下来的n行，每行两个整数，第一个begin,第二个end',
        output: '输出最多能安排的活动个数',
        sampleCode: `#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

struct Activity {
    int begin;
    int end;
};

bool compareActivities(const Activity &a, const Activity &b) {
    return a.end < b.end;
}

int maxActivities(vector<Activity> &activities) {
    if (activities.empty()) return 0;
    
    sort(activities.begin(), activities.end(), compareActivities);
    
    int count = 1;
    int last_end = activities[0].end;
    
    for (size_t i = 1; i < activities.size(); ++i) {
        if (activities[i].begin >= last_end) {
            count++;
            last_end = activities[i].end;
        }
    }
    
    return count;
}

int main() {
    int n;
    cin >> n;
    
    vector<Activity> activities(n);
    for (int i = 0; i < n; ++i) {
        cin >> activities[i].begin >> activities[i].end;
    }
    
    cout << maxActivities(activities) << endl;
    
    return 0;
}`
    },
    {
        id: 'P1024',
        title: '【基础】过河问题',
        difficulty: '中等',
        description: '有n个农民需要过河赶集，河上有一座桥，这座桥同时最多容纳3人，每人过桥要1分钟若一人下桥后，剩余人中下一人立刻上桥，求至少多少分钟后，能全部通过桥',
        input: '第一行农民人数n',
        output: '最多要花费时间',
        sampleCode: `#include <iostream>
#include <cmath>

using namespace std;

int minTimeToCrossBridge(int n) {
    return (n + 2) / 3;  // 等价于 ceil(n / 3)
}

int main() {
    int n;
    cin >> n;
    
    cout << minTimeToCrossBridge(n) << endl;
    
    return 0;
}`
    },
    {
        id: 'P1025',
        title: '【基础】蛇形填数',
        difficulty: '中等',
        description: '在n乘n的方阵里填入1 2 3 4 …n×n，要求填成蛇形',
        input: '输入n',
        output: '输出题述方阵，每行各数之间用一个空格隔开。',
        sampleCode: `#include <iostream>
#include <vector>

using namespace std;

vector<vector<int>> generateSnakeMatrix(int n) {
    vector<vector<int>> matrix(n, vector<int>(n, 0));
    int num = 1;
    int top = 0, bottom = n - 1, left = 0, right = n - 1;

    while (num <= n * n) {
        // 向右填充
        for (int i = left; i <= right; ++i) {
            matrix[top][i] = num++;
        }
        top++;

        // 向下填充
        for (int i = top; i <= bottom; ++i) {
            matrix[i][right] = num++;
        }
        right--;

        // 向左填充
        if (top <= bottom) {
            for (int i = right; i >= left; --i) {
                matrix[bottom][i] = num++;
            }
            bottom--;
        }

        // 向上填充
        if (left <= right) {
            for (int i = bottom; i >= top; --i) {
                matrix[i][left] = num++;
            }
            left++;
        }
    }

    return matrix;
}

void printMatrix(const vector<vector<int>>& matrix) {
    for (const auto& row : matrix) {
        for (int num : row) {
            cout << num << " ";
        }
        cout << endl;
    }
}

int main() {
    int n;
    cin >> n;
    vector<vector<int>> matrix = generateSnakeMatrix(n);
    printMatrix(matrix);
    return 0;
}`
    },

    {
        id: 'P1026',
        title: '【基础】十进制转二进制',
        difficulty: '中等',
        description: '将十进制正整数转换为二进制',
        input: '正整数n (≤1000)',
        output: '二进制表示',
        sampleCode: `#include <iostream>
#include <stack>
using namespace std;

int main() {
    int n;
    stack<int> bits;
    cin >> n;
    if(n == 0) {
        cout << 0;
        return 0;
    }
    while(n) {
        bits.push(n%2);
        n /= 2;
    }
    while(!bits.empty()) {
        cout << bits.top();
        bits.pop();
    }
    return 0;
}`
    }
];

// 动态生成题目列表
problems.forEach(problem => {
    const problemItem = document.createElement('div');
    problemItem.className = 'problem-item';
    problemItem.style.cssText = `
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s;
        background: white;
    `;
    problemItem.innerHTML = `
        <h3 style="margin-top: 0; color: #1e88e5;">${problem.id} ${problem.title}</h3>
        <p><strong>难度：</strong><span style="color: ${
            problem.difficulty === '简单' ? '#4CAF50' : 
            problem.difficulty === '中等' ? '#FF9800' : '#F44336'
        }">${problem.difficulty}</span></p>
        <p style="color: #666; font-size: 14px;">${problem.description.substring(0, 50)}...</p>
    `;
    
    problemItem.addEventListener('mouseenter', () => {
        problemItem.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';
        problemItem.style.transform = 'translateY(-2px)';
    });
    problemItem.addEventListener('mouseleave', () => {
        problemItem.style.boxShadow = 'none';
        problemItem.style.transform = 'none';
    });
    
    problemItem.addEventListener('click', () => showProblemDetail(problem));
    problemList.appendChild(problemItem);
});

// 组装弹窗
modalHeader.appendChild(modalTitle);
modalHeader.appendChild(closeButton);
problemBankModal.appendChild(modalHeader);
problemBankModal.appendChild(problemList);
document.body.appendChild(problemBankModal);

// 显示题目详情函数
function showProblemDetail(problem) {
    const problemDetail = document.createElement('div');
    problemDetail.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
        z-index: 1001;
        padding: 30px;
        box-sizing: border-box;
        overflow-y: auto;
    `;
    
    problemDetail.innerHTML = `
        <div style="max-width: 800px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                <div>
                    <h1 style="margin: 0 0 5px 0; color: #1e88e5;">${problem.id} ${problem.title}</h1>
                    <span style="display: inline-block; padding: 3px 10px; background: ${
                        problem.difficulty === '简单' ? '#E8F5E9' : 
                        problem.difficulty === '中等' ? '#FFF3E0' : '#FFEBEE'
                    }; color: ${
                        problem.difficulty === '简单' ? '#2E7D32' : 
                        problem.difficulty === '中等' ? '#E65100' : '#C62828'
                    }; border-radius: 20px; font-size: 14px;">${problem.difficulty}</span>
                </div>
                <button class="btn" id="backToList" style="background: none; border: none; color: #1e88e5; font-size: 18px; cursor: pointer;">
                    &times; 返回题库
                </button>
            </div>
            
            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #1e88e5;">
                <h3 style="margin-top: 0; color: #1e88e5;">题目描述</h3>
                <p style="line-height: 1.6;">${problem.description}</p>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div style="background: #E3F2FD; padding: 15px; border-radius: 8px;">
                    <h3 style="margin-top: 0; color: #0D47A1;">输入格式</h3>
                    <p style="line-height: 1.6;">${problem.input}</p>
                </div>
                <div style="background: #E8F5E9; padding: 15px; border-radius: 8px;">
                    <h3 style="margin-top: 0; color: #1B5E20;">输出格式</h3>
                    <p style="line-height: 1.6;">${problem.output}</p>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <h3 style="color: #1e88e5;">AI示例代码</h3>
                <pre style="background: #263238; color: #EEFFFF; padding: 15px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; line-height: 1.5;">${problem.sampleCode}</pre>
            </div>
            
            <div style="background: #FFF3E0; padding: 15px; border-radius: 8px;">
                <h3 style="margin-top: 0; color: #E65100;">AI提示</h3>
                <ul style="padding-left: 20px;">
                    <li>代码可以直接复制到编译器(如Dev C++)中运行</li>
                    <li>注意处理边界条件</li>
                    <li>提交前请自行测试多个用例</li>
                    <li>题目为Python C++通用，但示例代码为C++，请注意分辨</li>
                </ul>
            </div>
        </div>
    `;
    
    document.body.appendChild(problemDetail);
    
    // 返回题目列表
    document.getElementById('backToList').addEventListener('click', function() {
        problemDetail.remove();
    });
}

// 点击题库链接显示弹窗
problemBankLink.addEventListener('click', function(e) {
    e.preventDefault();
    problemBankModal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
});

// 关闭弹窗
closeButton.addEventListener('click', function() {
    problemBankModal.classList.add('hidden');
    document.body.style.overflow = '';
});


// 获取训练链接元素
const trainingLink = document.querySelector('nav ul li:nth-child(3) a');

// 创建全屏训练弹窗
const trainingModal = document.createElement('div');
trainingModal.id = 'trainingModal';
trainingModal.className = 'hidden';
trainingModal.style.cssText = `
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: white;
    z-index: 1000;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
`;

// 弹窗头部
const trainingHeader = document.createElement('div');
trainingHeader.style.cssText = `
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
`;

const trainingTitle = document.createElement('h2');
trainingTitle.textContent = '训练';
trainingTitle.style.margin = '0';

const closeTrainingButton = document.createElement('button');
closeTrainingButton.innerHTML = '&times; 关闭';
closeTrainingButton.className = 'btn';
closeTrainingButton.style.cssText = `
    background: none;
    border: none;
    color: #1e88e5;
    font-size: 18px;
    cursor: pointer;
    padding: 5px 10px;
`;

// 训练项目容器
const trainingItems = document.createElement('div');
trainingItems.style.cssText = `
    display: grid;
    gap: 15px;
`;

// 1. 入门模块
const trainingItem1 = document.createElement('div');
trainingItem1.className = 'training-item';
trainingItem1.style.cssText = `
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s;
`;
trainingItem1.innerHTML = `
    <h3 style="margin-top: 0;">1. 入门【点击进入】</h3>
    <p>已开放</p>
    <p></p>
`;

// 2. 进制转换模块
const trainingItem2 = document.createElement('div');
trainingItem2.className = 'training-item';
trainingItem2.style.cssText = trainingItem1.style.cssText;
trainingItem2.innerHTML = `
    <h3 style="margin-top: 0;">2. 进制转换【点击进入】</h3>
    <p>已开放</p>
    <p></p>
`;

// 3. 大课间练习模块
const trainingItem3 = document.createElement('div');
trainingItem3.className = 'training-item';
trainingItem3.style.cssText = trainingItem1.style.cssText;
trainingItem3.innerHTML = `
    <h3 style="margin-top: 0;">3. 大课间练习【点击进入】</h3>
    <p>已开放</p>
    <p></p>
`;

// 4. 难题合集模块
const trainingItem4 = document.createElement('div');
trainingItem4.className = 'training-item';
trainingItem4.style.cssText = trainingItem1.style.cssText;
trainingItem4.innerHTML = `
    <h3 style="margin-top: 0;">4. 难题合集【点击进入】</h3>
    <p>已开放</p>
    <p></p>
`;

// 组装弹窗
trainingHeader.appendChild(trainingTitle);
trainingHeader.appendChild(closeTrainingButton);
trainingItems.appendChild(trainingItem1);
trainingItems.appendChild(trainingItem2);
trainingItems.appendChild(trainingItem3);
trainingItems.appendChild(trainingItem4);
trainingModal.appendChild(trainingHeader);
trainingModal.appendChild(trainingItems);
document.body.appendChild(trainingModal);

// 点击训练链接显示弹窗
trainingLink.addEventListener('click', function(e) {
    e.preventDefault();
    trainingModal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
});

// 关闭训练弹窗
closeTrainingButton.addEventListener('click', function() {
    trainingModal.classList.add('hidden');
    document.body.style.overflow = '';
});

// 显示题目详情的通用函数
function showProblemModal(title, problems) {
    const modal = document.createElement('div');
    modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white;
        z-index: 1001;
        padding: 20px;
        box-sizing: border-box;
        overflow-y: auto;
    `;
    
    let problemsHTML = problems.map((problem, index) => `
        <div style="background: #f9f9f9; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
            <h3 style="margin-top: 0;">${index+1}. ${problem.title}</h3>
            <p><strong>难度</strong>: ${problem.difficulty}</p>
            <p><strong>描述</strong>: ${problem.description}</p>
            ${problem.example ? `<p><strong>示例</strong>: ${problem.example}</p>` : ''}
            <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; overflow-x: auto;">
${problem.solution}</pre>
        </div>
    `).join('');
    
    modal.innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="margin: 0;">${title}</h2>
            <button class="btn" id="backToTraining" style="background: none; border: none; color: #1e88e5; font-size: 18px; cursor: pointer;">
                &times; 返回
            </button>
        </div>
        <div style="display: grid; gap: 20px;">
            ${problemsHTML}
        </div>
    `;
    
    document.body.appendChild(modal);
    
    // 返回训练列表
    modal.querySelector('#backToTraining').addEventListener('click', function() {
        modal.remove();
    });
}

// 1. 点击"入门"显示Python题目
trainingItem1.addEventListener('click', function() {
    const problems = [
        {
            title: '最长无重复字符子串',
            difficulty: '★★★☆',
            description: '给定一个字符串，找出不含有重复字符的最长子串的长度。',
            example: '输入"abcabcbb"，输出3（"abc"长度为3）',
            solution: `def length_of_longest_substring(s):
    char_index = {}
    left = max_len = 0
    for right, char in enumerate(s):
        if char in char_index and char_index[char] >= left:
            left = char_index[char] + 1
        char_index[char] = right
        max_len = max(max_len, right - left + 1)
    return max_len`
        }
    ];
    showProblemModal('Python入门 - 中等偏难题目', problems);
});

// 2. 点击"进制转换"显示题目
trainingItem2.addEventListener('click', function() {
    const problems = [
        {
            title: '十进制转任意进制',
            difficulty: '★★☆☆',
            description: '编写一个函数将十进制数转换为2-16任意进制的字符串表示。',
            example: '输入(255, 16)，输出"FF"',
            solution: `def decimal_to_base(n, base):
    if base < 2 or base > 16:
        return "Base out of range"
    digits = "0123456789ABCDEF"
    result = []
    while n > 0:
        result.append(digits[n % base])
        n = n // base
    return ''.join(reversed(result)) if result else "0"`
        }
    ];
    showProblemModal('进制转换专项练习', problems);
});

// 3. 点击"大课间练习"显示题目
trainingItem3.addEventListener('click', function() {
    const problems = [
        {
            title: '矩阵旋转',
            difficulty: '★★★☆',
            description: '给定一个n×n的二维矩阵，原地将矩阵顺时针旋转90度。',
            example: '输入[[1,2,3],[4,5,6],[7,8,9]]，输出[[7,4,1],[8,5,2],[9,6,3]]',
            solution: `def rotate(matrix):
    n = len(matrix)
    # 先转置矩阵
    for i in range(n):
        for j in range(i, n):
            matrix[i][j], matrix[j][i] = matrix[j][i], matrix[i][j]
    # 再翻转每一行
    for i in range(n):
        matrix[i] = matrix[i][::-1]`
        }
    ];
    showProblemModal('大课间限时练习', problems);
});

// 4. 点击"难题合集"显示题目
trainingItem4.addEventListener('click', function() {
    const problems = [
        {
            title: '接雨水问题',
            difficulty: '★★★★',
            description: '给定n个非负整数表示每个宽度为1的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。',
            example: '输入[0,1,0,2,1,0,1,3,2,1,2,1]，输出6',
            solution: `def trap(height):
    if not height:
        return 0
    left, right = 0, len(height) - 1
    left_max = right_max = 0
    result = 0
    while left < right:
        if height[left] < height[right]:
            if height[left] >= left_max:
                left_max = height[left]
            else:
                result += left_max - height[left]
            left += 1
        else:
            if height[right] >= right_max:
                right_max = height[right]
            else:
                result += right_max - height[right]
            right -= 1
    return result`
        }
    ];
    showProblemModal('高难度挑战题目', problems);
});

// 用户数据库（使用localStorage存储）
        const userDB = {
            init: function() {
                // 清空原有数据，只保留空数据库结构
                if (!localStorage.getItem('users')) {
                    localStorage.setItem('users', JSON.stringify({}));
                }
            },
            
            getUsers: function() {
                return JSON.parse(localStorage.getItem('users')) || {};
            },
            
            addUser: function(user) {
                const users = this.getUsers();
                users[user.username] = user;
                localStorage.setItem('users', JSON.stringify(users));
            },
            
            getUser: function(username) {
                const users = this.getUsers();
                return users[username];
            },
            
            updateUser: function(username, updates) {
                const users = this.getUsers();
                if (users[username]) {
                    users[username] = {...users[username], ...updates};
                    localStorage.setItem('users', JSON.stringify(users));
                    return true;
                }
                return false;
            },
            
            // 清空数据库
            clearAll: function() {
                localStorage.setItem('users', JSON.stringify({}));
            }
        };

        // 初始化用户数据库（清空状态）
        userDB.init();

        // 用户状态管理
        let currentUser = null;
        let isEditMode = false;
        let originalContents = {};

        // DOM元素
        const loginModal = document.getElementById('loginModal');
        const registerModal = document.getElementById('registerModal');
        const profileModal = document.getElementById('profileModal');
        const mainContent = document.getElementById('mainContent');
        const loginLink = document.getElementById('loginLink');
        const registerLink = document.getElementById('registerLink');
        const editModeLink = document.getElementById('editModeLink');
        const logoutLink = document.getElementById('logoutLink');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const profileForm = document.getElementById('profileForm');
        const showRegister = document.getElementById('showRegister');
        const showLogin = document.getElementById('showLogin');
        const editControls = document.getElementById('editControls');
        const saveChangesBtn = document.getElementById('saveChanges');
        const exitEditModeBtn = document.getElementById('exitEditMode');
        const userProfile = document.getElementById('userProfile');
        const displayUsername = document.getElementById('displayUsername');
        const displayEmail = document.getElementById('displayEmail');
        const userRole = document.getElementById('userRole');
        const userAvatar = document.getElementById('userAvatar');
        const editProfileBtn = document.getElementById('editProfile');
        const cancelEditProfileBtn = document.getElementById('cancelEditProfile');
        const executeBatchRegister = document.getElementById('executeBatchRegister');
        const batchRegisterResult = document.getElementById('batchRegisterResult');

 // 显示登录模态框
loginLink.addEventListener('click', (e) => {
    e.preventDefault();
    loginModal.classList.remove('hidden');
    mainContent.classList.add('hidden');
});

// 显示注册模态框
registerLink.addEventListener('click', (e) => {
    e.preventDefault();
    registerModal.classList.remove('hidden');
    mainContent.classList.add('hidden');
});

// 从注册切换到登录
showLogin.addEventListener('click', (e) => {
    e.preventDefault();
    registerModal.classList.add('hidden');
    loginModal.classList.remove('hidden');
});

// 从登录切换到注册
showRegister.addEventListener('click', (e) => {
    e.preventDefault();
    loginModal.classList.add('hidden');
    registerModal.classList.remove('hidden');
});

// 登录处理
loginForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const remember = document.getElementById('remember').checked;
    
    // 超级管理员特殊处理
    if (username === 'xuage' && password === 'xjx111228') {
        const superAdmin = {
            username: 'xuage',
            password: 'xjx111228',
            email: 'superadmin@dhqzcs.com',
            role: 'superadmin'
        };
        userDB.addUser(superAdmin); // 确保超级管理员账号存在
        currentUser = superAdmin;
        alert('登录成功！欢迎超级管理员 xuage');
        updateUIAfterLogin();
        loginModal.classList.add('hidden');
        mainContent.classList.remove('hidden');
        if (remember) {
            localStorage.setItem('lastLogin', username);
        } else {
            localStorage.removeItem('lastLogin');
        }
        return;
    }
    
    // 普通用户验证
    const user = userDB.getUser(username);
    if (user && user.password === password) {
        currentUser = user;
        let roleName = '用户';
        if (user.role === 'superadmin') roleName = '超级管理员';
        else if (user.role === 'admin') roleName = '管理员';
        
        alert(`登录成功！欢迎 ${roleName} ${username}`);
        updateUIAfterLogin();
        loginModal.classList.add('hidden');
        mainContent.classList.remove('hidden');
        
        // 记住我功能
        if (remember) {
            localStorage.setItem('lastLogin', username);
        } else {
            localStorage.removeItem('lastLogin');
        }
    } else {
        alert('AI警告：用户名或密码错误');
    }
});

// 注册处理
registerForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const username = document.getElementById('regUsername').value;
    const password = document.getElementById('regPassword').value;
    const confirmPassword = document.getElementById('regConfirmPassword').value;
    const email = document.getElementById('regEmail').value;
    
    if (password !== confirmPassword) {
        alert('两次输入的密码不一致');
        return;
    }
    
    if (userDB.getUser(username)) {
        alert('用户名已存在');
        return;
    }
    
    const newUser = {
        username,
        password,
        email,
        role: 'user' // 默认注册为普通用户
    };
    
    userDB.addUser(newUser);
    alert(`注册成功！欢迎 ${username}`);
    registerModal.classList.add('hidden');
    mainContent.classList.remove('hidden');
});

// 退出登录
logoutLink.addEventListener('click', (e) => {
    e.preventDefault();
    currentUser = null;
    if (isEditMode) {
        exitEditMode();
    }
    updateUIAfterLogout();
});

        // 进入编辑模式
        editModeLink.addEventListener('click', (e) => {
            e.preventDefault();
            enterEditMode();
        });

        // 保存更改
        saveChangesBtn.addEventListener('click', () => {
            alert('本次更改已保存');
        });

        // 退出编辑模式
        exitEditModeBtn.addEventListener('click', () => {
            exitEditMode();
        });

        // 显示编辑资料模态框
        editProfileBtn.addEventListener('click', () => {
            document.getElementById('profileUsername').value = currentUser.username;
            document.getElementById('profileEmail').value = currentUser.email;
            document.getElementById('profilePassword').value = '';
            document.getElementById('profileConfirmPassword').value = '';
            profileModal.classList.remove('hidden');
        });

        // 取消编辑资料
        cancelEditProfileBtn.addEventListener('click', () => {
            profileModal.classList.add('hidden');
        });

        // 保存资料更改
        profileForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('profileEmail').value;
            const password = document.getElementById('profilePassword').value;
            const confirmPassword = document.getElementById('profileConfirmPassword').value;
            
            if (password && password !== confirmPassword) {
                alert('两次输入的密码不一致');
                return;
            }
            
            const updates = { email };
            if (password) {
                updates.password = password;
            }
            
            if (userDB.updateUser(currentUser.username, updates)) {
                currentUser = {...currentUser, ...updates};
                updateUserProfile();
                alert('资料更新成功');
                profileModal.classList.add('hidden');
            } else {
                alert('更新失败');
            }
        });

        // 批量注册功能
        executeBatchRegister.addEventListener('click', () => {
            const text = document.getElementById('batchRegisterText').value.trim();
            if (!text) {
                alert('请输入要注册的用户信息');
                return;
            }
            
            const lines = text.split('\n');
            let successCount = 0;
            let errorCount = 0;
            const errorMessages = [];
            
            lines.forEach((line, index) => {
                const parts = line.split(',');
                if (parts.length < 3) {
                    errorCount++;
                    errorMessages.push(`第${index + 1}行: 格式不正确`);
                    return;
                }
                
                const username = parts[0].trim();
                const password = parts[1].trim();
                const email = parts[2].trim();
                let role = parts[3] ? parts[3].trim() : 'user'; // 默认为普通用户
                
                // 权限检查：管理员只能创建普通用户或管理员，不能创建超级管理员
                if (currentUser.role === 'admin' && role === 'superadmin') {
                    errorCount++;
                    errorMessages.push(`第${index + 1}行: 管理员无权创建超级管理员`);
                    role = 'user'; // 降级为普通用户
                }
                
                if (!username || !password || !email) {
                    errorCount++;
                    errorMessages.push(`第${index + 1}行: 缺少必要信息`);
                    return;
                }
                
                // 验证角色是否有效
                const validRoles = ['superadmin', 'admin', 'user'];
                if (role && !validRoles.includes(role)) {
                    errorCount++;
                    errorMessages.push(`第${index + 1}行: 无效角色，必须是 superadmin, admin 或 user`);
                    return;
                }
                
                if (userDB.getUser(username)) {
                    errorCount++;
                    errorMessages.push(`第${index + 1}行: 用户名 ${username} 已存在`);
                    return;
                }
                
                const newUser = {
                    username,
                    password,
                    email,
                    role: role || 'user' // 默认为普通用户
                };
                
                userDB.addUser(newUser);
                successCount++;
            });
            
            batchRegisterResult.innerHTML = `
                <p>注册完成: 成功 ${successCount} 个, 失败 ${errorCount} 个</p>
                ${errorMessages.length > 0 ? 
                    `<p>AI提示:<br>${errorMessages.join('<br>')}</p>` : ''}
            `;
            
            if (successCount > 0) {
                alert(`批量注册完成，成功添加 ${successCount} 个用户`);
            }
        });

        // 更新登录后的UI
        function updateUIAfterLogin() {
            loginLink.classList.add('hidden');
            registerLink.classList.add('hidden');
            logoutLink.classList.remove('hidden');
            
            if (currentUser.role === 'superadmin' || currentUser.role === 'admin') {
                editModeLink.classList.remove('hidden');
                // 管理员和超级管理员都能看到批量注册
                document.getElementById('batchRegisterContainer').classList.remove('hidden');
            } else {
                editModeLink.classList.add('hidden');
                document.getElementById('batchRegisterContainer').classList.add('hidden');
            }
            
            updateUserProfile();
            userProfile.classList.remove('hidden');
        }

        // 更新用户资料显示
        function updateUserProfile() {
            displayUsername.textContent = currentUser.username;
            displayEmail.textContent = currentUser.email;
            
            // 根据角色显示不同的标识
            if (currentUser.role === 'superadmin') {
                userRole.innerHTML = '超级管理员 <span class="admin-badge super-admin-badge">SUPER</span>';
            } else if (currentUser.role === 'admin') {
                userRole.innerHTML = '管理员 <span class="admin-badge">ADMIN</span>';
            } else {
                userRole.textContent = '普通用户';
            }
            
            userAvatar.textContent = currentUser.username.charAt(0).toUpperCase();
        }

        // 更新退出后的UI
        function updateUIAfterLogout() {
            loginLink.classList.remove('hidden');
            registerLink.classList.remove('hidden');
            logoutLink.classList.add('hidden');
            editModeLink.classList.add('hidden');
            userProfile.classList.add('hidden');
            document.getElementById('batchRegisterContainer').classList.add('hidden');
        }

        // 进入编辑模式
        function enterEditMode() {
            isEditMode = true;
            editControls.classList.remove('hidden');
            
            // 使所有文本可编辑
            const editableElements = document.querySelectorAll('h1, h2, h3, h4, h5, h6, p, span, div:not(.edit-controls):not(.browser-warning), td, th, li, a:not(.btn)');
            
            editableElements.forEach(el => {
                // 保存原始内容
                originalContents[el.id || el.textContent] = el.innerHTML;
                
                // 设置可编辑
                el.contentEditable = true;
                el.classList.add('edit-mode');
            });
        }

        // 退出编辑模式
        function exitEditMode() {
            isEditMode = false;
            editControls.classList.add('hidden');
            
            // 恢复所有文本为不可编辑
            const editableElements = document.querySelectorAll('[contenteditable="true"]');
            
            editableElements.forEach(el => {
                el.contentEditable = false;
                el.classList.remove('edit-mode');
            });
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            // 检查是否有记住的登录状态
            const lastLogin = localStorage.getItem('lastLogin');
            if (lastLogin) {
                const user = userDB.getUser(lastLogin);
                if (user) {
                    document.getElementById('username').value = user.username;
                    document.getElementById('remember').checked = true;
                }
            }
        });
document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
});

document.addEventListener('keydown', function(e) {
    // 禁用 F12, Ctrl+Shift+I, Ctrl+U 等
    if (e.key === 'F12' || 
        (e.ctrlKey && e.shiftKey && e.key === 'I') || 
        (e.ctrlKey && e.key === 'U')) {
        e.preventDefault();
    }
});

    </script>
</body>
</html>
